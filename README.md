Запуск :
- docker compose up -d 

Учёт лимитов API

Сначала вычисляем приблизительный лимит запросов в час с запасом:

(100 - (20 * 100) / 100) / 24 = 3.3

То есть при лимите в 100 запросов в сутки мы можем делать 3–4 запроса в час.
Возьмем по 3

Команда для запуска 3 раза в час:
Открываем crontab -e и добавляем:

*/20 * * * * docker compose --project-directory /path/to/your/project up -d --abort-on-container-exit

Проверка дат осуществляется через функцию query_by_date().

Загрузка данных осуществляется через upsert.
